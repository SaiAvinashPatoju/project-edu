# ðŸš€ Render Deployment Guide for AI Classroom

## Prerequisites
- GitHub account with your code pushed
- Render account (free tier works)
- Google Gemini API key

---

## Step 1: Push Code to GitHub

```bash
cd d:\project_edu_new
git add .
git commit -m "Ready for Render deployment"
git push origin main
```

---

## Step 2: Deploy Backend (API Service)

### 2.1 Create New Web Service
1. Go to [Render Dashboard](https://dashboard.render.com/)
2. Click **"New +"** â†’ **"Web Service"**
3. Connect your GitHub repository

### 2.2 Configure Backend Service
| Setting | Value |
|---------|-------|
| **Name** | `ai-classroom-api` |
| **Region** | Oregon (US West) or closest to you |
| **Branch** | `main` |
| **Root Directory** | `backend` |
| **Runtime** | `Docker` |
| **Dockerfile Path** | `./Dockerfile` |
| **Instance Type** | Free |

### 2.3 Set Environment Variables
Click **"Add Environment Variable"** for each:

| Key | Value |
|-----|-------|
| `SECRET_KEY` | Click "Generate" to auto-create |
| `GOOGLE_API_KEY` | Your Gemini API key from [Google AI Studio](https://aistudio.google.com/apikey) |
| `DATABASE_URL` | `sqlite:///./lecture_slides.db` |
| `ALLOWED_ORIGINS` | `https://ai-classroom.onrender.com` (update after frontend deploys) |
| `ACCESS_TOKEN_EXPIRE_MINUTES` | `30` |
| `GUEST_TOKEN_EXPIRE_MINUTES` | `10` |

### 2.4 Deploy
Click **"Create Web Service"** and wait for build (~5-10 minutes)

### 2.5 Get Backend URL
After deployment, copy your backend URL:
```
https://ai-classroom-api.onrender.com
```
(Your actual URL will be shown in the dashboard)

---

## Step 3: Deploy Frontend (Next.js)

### 3.1 Create New Web Service
1. Click **"New +"** â†’ **"Web Service"**
2. Connect the same GitHub repository

### 3.2 Configure Frontend Service
| Setting | Value |
|---------|-------|
| **Name** | `ai-classroom` |
| **Region** | Same as backend |
| **Branch** | `main` |
| **Root Directory** | `frontend` |
| **Runtime** | `Docker` |
| **Dockerfile Path** | `./Dockerfile` |
| **Instance Type** | Free |

### 3.3 Set Environment Variables
| Key | Value |
|-----|-------|
| `NEXT_PUBLIC_API_URL` | `https://ai-classroom-api.onrender.com` (use YOUR backend URL) |

### 3.4 Deploy
Click **"Create Web Service"** and wait for build (~5-10 minutes)

---

## Step 4: Update CORS Settings

After frontend deploys, update the backend's `ALLOWED_ORIGINS`:

1. Go to Backend service â†’ **Environment**
2. Update `ALLOWED_ORIGINS` to your actual frontend URL:
   ```
   https://ai-classroom.onrender.com
   ```
3. Click **"Save Changes"** (service will redeploy)

---

## Step 5: Test Your Deployment

### Test Backend Health
```
https://YOUR-BACKEND-URL.onrender.com/
```
Should return: `{"status": "healthy"}`

### Test Frontend
```
https://YOUR-FRONTEND-URL.onrender.com/
```
Should show the AI Classroom homepage

### Test Guest Login
1. Click "Try as Guest"
2. Enter any email
3. Should redirect to demo recording page

---

## ðŸ”§ Troubleshooting

### Backend Build Fails
- Check Render logs for error details
- Ensure `requirements.txt` is in the `backend` folder
- Verify Dockerfile syntax

### Frontend Build Fails
- Check that `next.config.js` has `output: 'standalone'`
- Ensure `package.json` and `package-lock.json` exist
- Check Node.js version compatibility

### CORS Errors
- Update `ALLOWED_ORIGINS` in backend to match frontend URL exactly
- Include `https://` prefix
- Redeploy backend after changing

### "Failed to fetch" Errors
- Verify `NEXT_PUBLIC_API_URL` points to correct backend URL
- Check backend is running (visit backend URL directly)
- Ensure backend URL includes `https://`

### Gemini API Errors
- Verify `GOOGLE_API_KEY` is set correctly
- Check API key has access to Gemini models
- Review quota limits in Google Cloud Console

---

## ðŸ“Š Environment Variables Summary

### Backend (`ai-classroom-api`)
```
SECRET_KEY=<auto-generated>
GOOGLE_API_KEY=<your-gemini-api-key>
DATABASE_URL=sqlite:///./lecture_slides.db
ALLOWED_ORIGINS=https://YOUR-FRONTEND.onrender.com
ACCESS_TOKEN_EXPIRE_MINUTES=30
GUEST_TOKEN_EXPIRE_MINUTES=10
```

### Frontend (`ai-classroom`)
```
NEXT_PUBLIC_API_URL=https://YOUR-BACKEND.onrender.com
```

---

## ðŸŽ‰ Done!

Your AI Classroom is now live at:
- **Frontend**: `https://ai-classroom.onrender.com`
- **Backend API**: `https://ai-classroom-api.onrender.com`

> **Note**: Free tier services sleep after 15 minutes of inactivity. First request after sleep takes ~30 seconds to wake up.